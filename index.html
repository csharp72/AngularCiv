<!DOCTYPE html>
<html ng-app="app">
<head>
	<title>Angular Civ Clicker</title>

	<script type="text/javascript" src="./js/libs/angular.min.js"></script>
	<script type="text/javascript" src="./js/libs/angular-touch.min.js"></script>
	<script type="text/javascript" src="./js/libs/angular-cookies.min.js"></script>
	<script type="text/javascript" src="./js/libs/jquery-1.11.1.min.js"></script>

	<script type="text/javascript" src="./js/index.js"></script>
	<script type="text/javascript" src="./js/game.js"></script>
	<script type="text/javascript" src="./js/buildings.js"></script>
	<script type="text/javascript" src="./js/resources.js"></script>
	<script type="text/javascript" src="./js/population.js"></script>
	<script type="text/javascript" src="./js/filters.js"></script>
	<link rel="stylesheet" type="text/css" href="css/index.css">

	<meta name="viewport" content="width=device-width, user-scalable=no">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">

</head>
<body ng-controller="GameCtrl">

	<div class="resource-dash" ng-click="selectScreen( screens.resources )">
		<div class="resource" ng-repeat="r in [resources.food, resources.wood, resources.stone, resources.skins, resources.herbs, resources.ore, resources.leather, resources.medicine, resources.metal]">
			<div><img class="resource-image" ng-src="{{r.image}}" alt="" /><span class="total">{{r.total | number:0}}</span></div>
			<div class="production-rate" ng-class="{neg:r.productionRate < 0, pos:r.productionRate > 0}">
				<span class="rate">{{r.productionRate | number:1}}</span>
				<span class="time-frame">sec</span>
			</div>
			<div class="limit" ng-if="r.max">Max {{r.max}}</div>
		</div>
	</div>
	
	<div class="resources">
		<div class="resource" ng-repeat="r in resources.basic" ng-click="collect(r, $event)">
			<div class="resource-content">
				Gather {{r.name}}
				<div class="gathered-resources">
					<div class="gathered-resource">
						<img  ng-src="{{r.image}}" alt="" />
					</div>
				</div>
				<img class="resource-image" ng-src="{{r.image}}" alt="" />

				<div class="special-resource">{{r.specialChance * 100}}% chance to produce <img class="special-resource-image"ng-src="{{r.specialResource.image}}" alt="{{r.specialResource.name}}"/></div>
			</div>
		</div>
	</div>

	<div class="building-dash" ng-click="selectScreen( screens.buildings )">
		<div class="building" ng-repeat="b in buildingsList">
			<span class="name">{{b.name}}</span><span class="total">{{b.total}}</span>
		</div>
	</div>

	<div class="buildings">
		<div class="building" ng-repeat="b in buildingsList">
			<button ng-disabled="!resources.enough(b.cost)" ng-click="buildBuilding(b)">Build {{b.name}}</button>
			<div class="building-details">
				<span class="cost" ng-bind-html="b.cost | displayCost"></span>
				<!-- <span class="boon" ng-if="b.boons.maxPopulation">Increases Max Population by {{b.boons.maxPopulation}}</span> -->
				<div class="boons">
					<span class="boon" ng-repeat="(name, boon) in b.boons">{{name}}: <span ng-repeat="(a,b) in boon">{{a}} +{{b}}</span>{{!$last ? ', ' : ''}}</span>
				</div>
			</div>
		</div>
	</div>

	<div class="population-dash" ng-click="selectScreen( screens.buildings )">
		<div>Population: {{ population.total }}</div>
		<div>Max Population: {{ population.max }}</div>
	</div>

	<div class="population">
		<!-- <div>Max Population: {{ population.max }}</div>
		<div>Population: {{ population.total }}</div> -->
		<div>Unemployed: {{ population.getJobTotal( jobs.unemployed ) }}</div>
		<button class="btn make-worker" ng-disabled="!canMakeWorker()" ng-click="population.makeWorker()">Create Worker</button>
		<span class="cost" ng-bind-html="jobs.unemployed.cost | displayCost"></span><span class="drain">-1 food / sec</span>
		<div class="job" ng-repeat="job in workingJobs">
			<button class="btn job-assignment relieve" ng-disabled="!population.getJobTotal(job)" ng-click="population.relieve(job)">-</button>
			<span class="job-name">{{job.name}}: {{population.getJobTotal(job)}}</span>
			<button class="btn job-assignment assign" ng-disabled="!canAssignWorker(job)" ng-click="population.assign(job)">+</button>
			<span class="cost" ng-bind-html="job.cost | displayCost"></span>
			<span class="production" ng-repeat="(name, prod) in job.production">+{{prod}} {{name}} / sec</span>
		</div>
	</div>

	
	

</body>
</html>