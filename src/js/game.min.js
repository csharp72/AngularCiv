angular.module("app",[]),angular.module("app").controller("GameCtrl",["$scope","Worker",function(e,o){function n(o,n){var r=new s(o);return e[o]=r,e.basicResources.push(r),r.specialResource=e[n]=new s(n),e.specialResources.push(e[n]),r.collect=function(){r.add(r.increment);var e=Math.random();e<r.specialchance&&r.specialResource.add(r.increment)},r}window.$scope=e,e.resources=[],e.basicResources=[],e.specialResources=[],e.buildings=[];var s=function(o){this.total=0,this.name=o,this.increment=1,this.specialchance=.1,this.add=function(e){this.total+=e},e.resources.push(this)},r=function(){e.specialResources.push(this)};new n("food","skins"),new n("wood","herbs"),new n("stone","ore"),e.leather=new r("leather"),e.metal=new r("metal"),e.piety=new r("piety"),e.corpses=new r("corpses"),e.maxPopulation=0,e.population=0,e.tent={name:"tent",total:0,devotion:0,require:{wood:2,skins:2},boons:{maxPopulation:1}},e.workers=[],e.makeBuilding=function(o){e.useResources(o.require)&&(o.total++,angular.forEach(o.boons,function(o,n){e[n]+=o}))},e.enoughResources=function(o){var n=!0;return angular.forEach(o,function(o,s){e[s].total<o&&(n=!1)}),n},e.useResources=function(o){return e.enoughResources(o)?(angular.forEach(o,function(o,n){e[n].total-=o}),!0):!1},e.createWorker=function(){var n={food:20};e.workers.length<e.maxPopulation&&e.useResources(n)&&e.workers.push(new o)}}]);